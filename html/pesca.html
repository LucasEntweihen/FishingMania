<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gato Pescador - Mestre dos 67</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/style/style.css">
    <link rel="stylesheet" href="/style/style2.css">
</head>
<body>

    <div id="game-container" class="day-mode">
        <canvas id="bg-canvas"></canvas>

        <div id="ui-layer">
            
            <div class="top-bar">
                <div class="left-group">
                    <div class="currency badge tooltip" data-tip="Suas economias">
                        <span class="coin-icon">ğŸª™</span>
                        <span id="cat-coins">0</span>
                    </div>
                    <div id="time-indicator" class="time-badge badge">â˜€ï¸ Dia</div>
                </div>
                
                <div class="menu-buttons">
                    <button id="open-shop-btn" class="icon-btn">ğŸ›’ Loja</button>
                    <button id="open-bait-forge-btn" class="icon-btn craft-btn" style="background: #27ae60; color: white; border: 2px solid white;">ğŸ§ª Lab. Iscas</button>
                    <button id="open-craft-btn" class="icon-btn craft-btn" style="background: #8e44ad; color: white;">ğŸ”¨ Forja</button>
                    <button id="open-scrap-btn" class="icon-btn" style="background: #7f8c8d; color: white;">ğŸ—‘ï¸ Lixos</button>
                    <button id="open-collection-btn" class="icon-btn">ğŸ“– Peixes</button>
                    <button id="open-67-btn" class="icon-btn gold-btn">ğŸ† Galeria 67</button>
                    <button id="exit-game-btn" class="icon-btn exit-btn">ğŸšª Sair</button>
                </div>
            </div>

            <button id="sushi-btn" class="locked">ğŸ£ FAZER SUSHI</button>

            <div class="center-stage">
                <div id="cat-fisherman" class="cat-idle">
                    <img src="/img/asset/gato mergulhador.png" class="cat-visual" alt="Gato Pescador" onerror="this.style.display='none'">
                    <div class="rod-visual rod-tier-0" id="rod-sinker-zone">
                        <div id="equipped-sinker-visual"></div>
                    </div>
                </div>
                
                <div id="line-container">
                    <div id="fishing-line"></div>
                    <div id="hook-group">
                        <div id="hook">J</div>
                        <div id="bait-visual"></div>
                        <img id="hooked-fish-img" src="" alt="Peixe Fisgado">
                    </div>
                </div>
            </div>

            <div class="controls-area">
                <div class="gear-display">
                    <div class="gear-slot tooltip" id="sinker-slot" data-tip="Peso da linha">ğŸª¨ PadrÃ£o</div>
                    <div class="gear-slot tooltip" id="bait-slot" data-tip="Isca atual">ğŸª Sem Isca</div>
                </div>

                <button id="cast-btn" class="main-action-btn">PESCAR (ESPAÃ‡O)</button>
                <div id="current-rod-display">Vara Atual: Galho Seco</div>
                <div id="save-status">Carregando...</div>
            </div>

            <div id="shop-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸª Loja de Materiais</h2>
                        <button id="close-shop-btn" class="close-btn">&times;</button>
                    </div>
                    <div id="shop-container" class="shop-grid"></div>
                </div>
            </div>

            <div id="craft-modal" class="modal hidden">
                <div class="modal-content" style="max-width: 950px; max-height: 85vh;">
                    <div class="modal-header" style="background: #8e44ad;">
                        <h2>ğŸ”¨ Forja de Equipamentos</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button id="open-workbench-btn" class="icon-btn" style="background: #f1c40f; color: #333; font-size: 0.9rem; border: none; padding: 5px 15px;">âš™ï¸ Montagem</button>
                            <button id="close-craft-btn" class="close-btn">&times;</button>
                        </div>
                    </div>
                    <div style="display: flex; height: 550px;">
                        <div style="width: 65%; border-right: 2px solid #eee; overflow-y: auto; background: #f9f9f9; padding: 10px;" id="recipe-list"></div>
                        <div style="width: 35%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow-y: auto;" id="crafting-area">
                            <div style="font-size: 4rem; color: #ccc; margin-bottom: 20px;">ğŸ”¥</div>
                            <h3 style="color: #333; margin-bottom: 10px; text-align:center;">Selecione uma planta</h3>
                            <p style="color: #777; font-size: 0.9rem; text-align: center;">Escolha na lista ao lado para ver os materiais e forjar.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="bait-forge-modal" class="modal hidden">
                <div class="modal-content" style="max-width: 950px; max-height: 85vh;">
                    <div class="modal-header" style="background: #27ae60;">
                        <h2>ğŸ§ª LaboratÃ³rio QuÃ­mico</h2>
                        <button id="close-bait-forge-btn" class="close-btn">&times;</button>
                    </div>
                    <div style="display: flex; height: 550px;">
                        <div style="width: 35%; border-right: 2px solid #eee; overflow-y: auto; background: #f0fdf4; padding: 10px;" id="bait-recipe-list">
                            </div>
                        
                        <div style="width: 65%; display: flex; flex-direction: column; background: #ecf0f1; position: relative;">
                            
                            <div style="padding: 20px; display: flex; flex-direction: column; align-items: center; border-bottom: 2px solid #bdc3c7;">
                                <h3 style="color: #333; margin-bottom: 5px; font-family:'Fredoka', sans-serif;">Misturador de Iscas</h3>
                                <p style="font-size: 0.8rem; color: #666; text-align: center; margin-top: 0; margin-bottom: 15px;">Arraste 2 extratos de lixo para os tubos. O Boost Ã© opcional e garante um Upgrade Permanente!</p>
                                
                                <div style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center;">
                                    <div class="equip-slot dropzone" data-droptype="bait-mat" id="bait-slot-1" style="min-width: 90px; min-height: 90px; border-radius: 50%; border: 4px dashed #bdc3c7; background: rgba(255,255,255,0.8);">
                                        <div class="slot-title" style="font-size:0.6rem;">Tubo 1</div>
                                        <div class="slot-content" id="bait-content-1">Vazio</div>
                                    </div>
                                    <div style="font-size: 1.5rem; color: #95a5a6; font-weight:bold;">+</div>
                                    <div class="equip-slot dropzone" data-droptype="bait-mat" id="bait-slot-2" style="min-width: 90px; min-height: 90px; border-radius: 50%; border: 4px dashed #bdc3c7; background: rgba(255,255,255,0.8);">
                                        <div class="slot-title" style="font-size:0.6rem;">Tubo 2</div>
                                        <div class="slot-content" id="bait-content-2">Vazio</div>
                                    </div>
                                    <div style="font-size: 1.5rem; color: #95a5a6; font-weight:bold;">+</div>
                                    
                                    <div class="equip-slot dropzone" data-droptype="boost-mat" id="bait-slot-3" style="min-width: 90px; min-height: 90px; border-radius: 50%; border: 4px dashed #e67e22; background: #fffaf0; box-shadow: 0 0 10px rgba(230, 126, 34, 0.2);">
                                        <div class="slot-title" style="font-size:0.6rem; color:#e67e22;">Boost</div>
                                        <div class="slot-content" id="bait-content-3">Vazio</div>
                                    </div>
                                </div>
                                
                                <div id="bait-craft-result" style="width: 100%; text-align: center; background: white; padding: 10px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); min-height: 120px;">
                                    <div style="color:#999; margin-top: 20px; font-family:'Poppins', sans-serif;">Clique em uma receita ao lado ou misture livremente.</div>
                                </div>
                            </div>
                            
                            <div style="flex: 1; padding: 10px; overflow-y: auto; background: #e8f8f5;" id="bait-mat-inventory">
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div id="scrap-modal" class="modal hidden">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header" style="background: #7f8c8d;">
                        <h2>ğŸ—‘ï¸ Museu do Lixo <span id="scrap-progress" class="header-stat">(0/0)</span></h2>
                        <button id="close-scrap-btn" class="close-btn">&times;</button>
                    </div>
                    <div style="background: #fdfdfd; padding: 10px; text-align: center; font-size: 0.85rem; color: #555; border-bottom: 2px dashed #ccc;">
                        Oceano poluÃ­do! Pescar sucata te recompensa com <b style="color:#2ecc71;">Extratos QuÃ­micos</b> para criar Iscas no LaboratÃ³rio!
                    </div>
                    <div id="scrap-grid" class="shop-grid"></div>
                </div>
            </div>

            <div id="workbench-modal" class="modal hidden">
                <div class="modal-content" style="max-width: 850px; max-height: 85vh;">
                    <div class="modal-header" style="background: #2c3e50;">
                        <h2>âš™ï¸ Mesa de Trabalho</h2>
                        <button id="close-workbench-btn" class="close-btn">&times;</button>
                    </div>
                    <div style="display: flex; height: 500px;">
                        <div style="width: 40%; background: #ecf0f1; padding: 20px; display: flex; flex-direction: column; gap: 10px; border-right: 2px solid #ccc; overflow-y: auto;">
                            <h3 style="text-align: center; color: #333; font-family: 'Fredoka', sans-serif; margin-bottom: 0;">Seu Equipamento</h3>
                            <p style="font-size: 0.7rem; text-align: center; color: #666; margin-top: 0;">Arraste os itens para as caixas</p>
                            
                            <div class="equip-slot dropzone" data-droptype="rod" id="wb-rod-slot">
                                <div class="slot-title">ğŸ£ Vara de Pesca</div>
                                <div class="slot-content" id="wb-rod-content">Vazio</div>
                            </div>
                            
                            <div class="equip-slot dropzone" data-droptype="sinker" id="wb-sinker-slot">
                                <div class="slot-title">ğŸª¨ Chumbada</div>
                                <div class="slot-content" id="wb-sinker-content">Vazio</div>
                            </div>

                            <div class="equip-slot dropzone" data-droptype="knife" id="wb-knife-slot">
                                <div class="slot-title">ğŸ”ª Faca de Sushi</div>
                                <div class="slot-content" id="wb-knife-content">Vazio</div>
                            </div>
                            
                            <div class="equip-slot dropzone" data-droptype="bait" id="wb-bait-slot">
                                <div class="slot-title">ğŸª Isca (ConsumÃ­vel)</div>
                                <div class="slot-content" id="wb-bait-content">Vazio</div>
                            </div>
                        </div>
                        
                        <div style="width: 60%; display: flex; flex-direction: column;">
                            <div class="backpack-tabs">
                                <button class="wb-tab-btn active" data-tab="rod">Varas</button>
                                <button class="wb-tab-btn" data-tab="sink">Pesos</button>
                                <button class="wb-tab-btn" data-tab="knife">Facas</button>
                                <button class="wb-tab-btn" data-tab="bait">Iscas</button>
                            </div>
                            <div id="workbench-grid" class="shop-grid" style="flex: 1; align-content: flex-start;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="collection-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header header-teal">
                        <h2>ğŸ“– EnciclopÃ©dia <span id="collection-progress" class="header-stat">(0/0)</span></h2>
                        <button id="close-collection-btn" class="close-btn">&times;</button>
                    </div>
                    <div id="collection-grid" class="shop-grid"></div>
                </div>
            </div>

            <div id="collection-67-modal" class="modal hidden">
                <div class="modal-content gold-border">
                    <div class="modal-header header-gold">
                        <h2>ğŸ† Galeria dos 67cm <span id="collection-67-progress" class="header-stat">(0/0)</span></h2>
                        <button id="close-67-btn" class="close-btn dark-text">&times;</button>
                    </div>
                    <div id="collection-67-grid" class="shop-grid"></div>
                </div>
            </div>

        </div>
    </div>

    <script src="/script/database.js"></script>
    <script type="module" src="/script/script.js"></script>
    <script src="/script/events.js" defer></script>
    <script src="/script/ragefish.js" defer></script>
    <script src="/script/crafting.js" defer></script>
</body>
</html>